<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Login Chat Room</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.js"></script>
	<link href="login-styles.css" rel="stylesheet" />


	<h1>Welcome to our chatroom</h1>


</head>

<body>
	<div id="Login">

		<h2>Already have an account?</h2>
		<input id="Usernamelogin" type="text" placeholder="Username" />
		<input id="Passwordlogin" type="password" placeholder="Password" />
		<textarea disabled id="ErrorLogin" rows="4" cols="79"> </textarea>

		<button id="sendlogin" onclick="Login();">Login</button>
	</div>
	<div id="Register">
		<h2>Register to our chatroom</h2>

		<input id="Usernameregister" type="text" placeholder="Username" />
		<input id="Passwordregister" type="password" placeholder="Password" />
		<textarea disabled id="ErrorRegister" rows="4" cols="79"> </textarea>
		<button id="sendlogin" onclick="Register();">Register</button>



	</div>
	<script>
		function Login() {
			var xhttp = new XMLHttpRequest();

			xhttp.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 400) {
					document.getElementById("ErrorLogin").innerText = this.responseText;
				} else if (this.readyState == 4 && this.status == 200) {
					window.location.replace("https://5c35caf4.ngrok.io/room");
				}
			};

			xhttp.open("POST", "/login");
			xhttp.setRequestHeader("Content-type", "application/JSON;charset=utf-8");
			xhttp.send(JSON.stringify(
				{
					"userName": document.getElementById('Usernamelogin').value,
					"password": document.getElementById('Passwordlogin').value

				}));
		}
		function Register() {
			var xhttp = new XMLHttpRequest();

			xhttp.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 405)
					document.getElementById("ErrorRegister").innerText = this.responseText;
			};

			xhttp.open("POST", "/register");



			xhttp.send(JSON.stringify(
				{
					"userName": document.getElementById('Usernameregister').value,
					"password": document.getElementById('Passwordregister').value

				}))

		}


	</script>

</body>



</html>